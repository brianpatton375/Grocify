<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Grocery Price Matcher</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
            color: #333;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .site-image {
            width: 100%;
            max-height: 200px;
            object-fit: contain;
            margin-bottom: 20px;
            border-radius: 8px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        textarea, input {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1em;
        }

        button {
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
        }

        button:hover {
            background-color: #218838;
        }

        .results {
            margin-top: 30px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            padding: 10px;
            border-bottom: 1px solid #ccc;
            text-align: right;
        }

        th:first-child, td:first-child {
            text-align: left;
        }

        th {
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
    <header>
        <h1>Grocery Price Matcher</h1>
        <p>Enter your grocery list, location, and compare prices!</p>
    </header>

    <div class="container">
        <img src="logo.jpg" alt="Logo" class="site-image" />

        <label for="zipCode">Enter ZIP code or address:</label>
        <input type="text" id="zipCode" placeholder="e.g., 28401 or 123 Main St" />

        <label for="groceryList">Grocery List (one item per line):</label>
        <textarea id="groceryList" placeholder="e.g., milk&#10;ground beef&#10;chips&#10;lettuce"></textarea>
        <button onclick="comparePrices()">Compare Prices</button>

        <div class="results" id="results"></div>
    </div>

    <script>
        function getQuantity(item) {
            item = item.toLowerCase();

            if (item.includes("beef") || item.includes("chicken") || item.includes("meat") || item.includes("pork")) {
                const unit = prompt(`For "${item}", do you want to enter weight (lbs) or pieces?`, "weight");
                return {
                    qty: parseFloat(prompt(`How many ${unit} of "${item}"?`, 1)) || 1,
                    label: unit === "pieces" ? "pcs" : "lbs"
                };
            } else if (item.includes("chip") || item.includes("snack") || item.includes("cookie") || item.includes("candy")) {
                const size = prompt(`What size package of "${item}"? (e.g. small, medium, large)`, "medium");
                return {
                    qty: 1,
                    label: `1 ${size} pack`
                };
            } else if (item.includes("lettuce") || item.includes("carrot") || item.includes("tomato") || item.includes("vegetable")) {
                return {
                    qty: parseFloat(prompt(`How many units of "${item}"?`, 1)) || 1,
                    label: "units"
                };
            } else {
                return {
                    qty: parseFloat(prompt(`How many of "${item}"?`, 1)) || 1,
                    label: "units"
                };
            }
        }

        function comparePrices() {
            const address = document.getElementById('zipCode').value.trim();
            if (!address) {
                alert("Please enter a ZIP code or address.");
                return;
            }

            const list = document.getElementById('groceryList').value.trim().split('\n');
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<h2>Price Comparison Results:</h2>';

            let totalA = 0, totalB = 0, totalC = 0;

            const table = document.createElement('table');
            table.innerHTML = `
                <tr>
                    <th>Item</th>
                    <th>Qty</th>
                    <th>Store A</th>
                    <th>Store B</th>
                    <th>Store C</th>
                </tr>
            `;

            list.forEach(rawItem => {
                const item = rawItem.trim();
                if (item) {
                    const { qty, label } = getQuantity(item);
                    const priceA = (Math.random() * 3 + 1).toFixed(2);
                    const priceB = (Math.random() * 3 + 1).toFixed(2);
                    const priceC = (Math.random() * 3 + 1).toFixed(2);

                    const total1 = qty * parseFloat(priceA);
                    const total2 = qty * parseFloat(priceB);
                    const total3 = qty * parseFloat(priceC);

                    totalA += total1;
                    totalB += total2;
                    totalC += total3;

                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${item}</td>
                        <td>${qty} ${label}</td>
                        <td>$${total1.toFixed(2)}</td>
                        <td>$${total2.toFixed(2)}</td>
                        <td>$${total3.toFixed(2)}</td>
                    `;
                    table.appendChild(row);
                }
            });

            const totalRow = document.createElement('tr');
            totalRow.innerHTML = `
                <td><strong>Total</strong></td>
                <td></td>
                <td><strong>$${totalA.toFixed(2)}</strong></td>
                <td><strong>$${totalB.toFixed(2)}</strong></td>
                <td><strong>$${totalC.toFixed(2)}</strong></td>
            `;
            table.appendChild(totalRow);

            resultsDiv.appendChild(table);
        }
    </script>

    <!-- Google Maps JavaScript API for future location use -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBoPppndOg3owtgXyfjCxiB7oquKuuYsq0&libraries=places"></script>
</body>
</html>
